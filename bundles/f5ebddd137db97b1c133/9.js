(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{313:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return s}));var r=n(13),o=n.n(r),a=n(120);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selection:{anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0,isForward:!0}},e)}const l=Object(a.createContext)(i());function s(){return Object(a.useContext)(l)}l.displayName="ComposerContext"},402:function(e,t,n){"use strict";function r(e){if(e.anchorNode&&e.focusNode){var t,n;const r=new Range;e.isForward?(r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset)):(r.setStart(e.focusNode,e.focusOffset),r.setEnd(e.anchorNode,e.anchorOffset)),null===(t=document.getSelection())||void 0===t||t.removeAllRanges(),null===(n=document.getSelection())||void 0===n||n.addRange(r)}return new Promise((e=>setTimeout(e,0)))}function o(){const e=document.getSelection();return Boolean(null==e?void 0:e.isCollapsed)}function a(e){const t=document.getSelection();if(!t)return!1;if(t.anchorNode===e&&t.anchorOffset<=1)return!0;let n=e.firstChild;do{var r;if(n===t.anchorNode)return 0===t.anchorOffset}while(n=(null===(r=n)||void 0===r?void 0:r.firstChild)||null);return!1}function c(e){var t;const n=document.getSelection();if(!n)return!1;if(n.focusNode===e&&n.focusOffset===(null===(t=e.childNodes)||void 0===t?void 0:t.length))return!0;let r=e.childNodes.item(e.childNodes.length-2);do{var o;if(r===n.focusNode)return n.focusOffset===(null===(o=r.textContent)||void 0===o?void 0:o.length)}while(r=r.lastChild);return!1}n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}))},403:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(136),o=n(124),a=n(128);function c(e){o.a.dispatch({action:a.a.EditEvent,event:null,timelineRenderingType:e.timelineRenderingType}),o.a.dispatch({action:a.a.FocusSendMessageComposer,context:e.timelineRenderingType})}function i(e,t){const n=t.getEvent().replacingEvent();!n||n.status!==r.EventStatus.QUEUED&&n.status!==r.EventStatus.NOT_SENT||e.cancelPendingEvent(n)}},636:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(120),o=n.n(r),a=n(142),c=n(205),i=n(121);const l=e=>{let{name:t,last:n}=e;const r=a.g[t],c=a.a[t];return o.a.createElement(o.a.Fragment,null,o.a.createElement("kbd",null," ",r||c&&Object(i.b)(c)||t," "),!n&&"+")},s=e=>{let{value:t,className:n="mx_KeyboardShortcut"}=e;if(!t)return null;const r=[];return t.ctrlOrCmdKey?r.push(o.a.createElement(l,{key:"ctrlOrCmdKey",name:c.a?c.b.META:c.b.CONTROL})):t.ctrlKey?r.push(o.a.createElement(l,{key:"ctrlKey",name:c.b.CONTROL})):t.metaKey&&r.push(o.a.createElement(l,{key:"metaKey",name:c.b.META})),t.altKey&&r.push(o.a.createElement(l,{key:"altKey",name:c.b.ALT})),t.shiftKey&&r.push(o.a.createElement(l,{key:"shiftKey",name:c.b.SHIFT})),o.a.createElement("div",{className:n},r,o.a.createElement(l,{name:t.key,last:!0}))}},639:function(e,t,n){"use strict";function r(e,t,n,r){var o;t===n.timelineRenderingType&&(null===(o=e.current)||void 0===o||o.focus(),r.current&&clearTimeout(r.current),r.current=window.setTimeout((()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.focus()}),200))}function o(e){const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const n=document.getSelection();n.removeAllRanges(),n.addRange(t),e.focus()}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},909:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(120),o=n(639);function a(e,t){Object(r.useEffect)((()=>{t.current&&!e&&Object(o.b)(t.current)}),[t,e])}},910:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(120);function o(){const[e,t]=Object(r.useState)(!1),n=Object(r.useRef)();Object(r.useEffect)((()=>()=>clearTimeout(n.current)),[n]);return{isFocused:e,onFocus:Object(r.useCallback)((e=>{clearTimeout(n.current),"focus"===e.type?t(!0):n.current=window.setTimeout((()=>t(!1)),100)}),[t,n])}}},917:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pe}));var r=n(120),o=n.n(r),a=n(640),c=n(126),i=n.n(c),l=n(138),s=n(920),u=n(132);function d(e){return e&&e.keyChar&&"command"!==e.type?`${e.keyChar}${e.text}`:""}const m=Object(r.forwardRef)(((e,t)=>{let{suggestion:n,handleMention:r}=e;const{room:a}=Object(l.c)(),c=Object(u.b)();return a?o.a.createElement("div",{className:"mx_SendWysiwygComposer_AutoCompleteWrapper","data-testid":"autocomplete-wrapper"},o.a.createElement(s.a,{ref:t,query:d(n),onConfirm:function(e){if(e.href&&c)switch(e.type){case"user":r(e.href,e.completion);break;case"room":r(e.href,function(e,t){var n;const r=e.completionId,o=e.completion;let a;return a=r?t.getRoom(r):o.startsWith("#")?t.getRooms().find((e=>e.getCanonicalAlias()===o||e.getAltAliases().includes(o))):t.getRoom(o),(null===(n=a)||void 0===n?void 0:n.name)||o}(e,c))}},selection:{start:0,end:0},room:a})):null}));var f;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function b(e){return r.createElement("svg",p({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),f||(f=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3a1 1 0 011-1h3.192C10.093 2 11.5 3.644 11.5 5.5c0 .753-.232 1.472-.634 2.06A3.471 3.471 0 0112.5 10.5c0 1.96-1.626 3.5-3.571 3.5H5a1 1 0 01-1-1V3zm2 1v3h2.192C8.841 7 9.5 6.405 9.5 5.5S8.84 4 8.192 4H6zm0 5v3h2.929c.894 0 1.571-.698 1.571-1.5S9.823 9 8.929 9H6z",fill:"currentColor"})))}m.displayName="WysiwygAutocomplete";var v;function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function g(e){return r.createElement("svg",h({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),v||(v=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.086 3.6l-1.805 8.804H4.8a.8.8 0 000 1.6H9.067a.8.8 0 100-1.6H7.914L9.719 3.6H11.2a.8.8 0 000-1.6H9.082a.8.8 0 00-.032 0H6.933a.8.8 0 100 1.6h1.153z",fill:"currentColor"})))}var O;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function y(e){return r.createElement("svg",E({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),O||(O=r.createElement("path",{d:"M8.193 11.3c2.02-.26 3.474-2.073 3.474-4.107v-4.36a.834.834 0 00-1.667 0v4.434c0 1.113-.753 2.126-1.847 2.346a2.33 2.33 0 01-2.82-2.28v-4.5a.834.834 0 00-1.666 0v4.5c0 2.38 2.086 4.28 4.526 3.967zM3 13.333c0 .367.3.667.667.667h8c.366 0 .666-.3.666-.667 0-.366-.3-.666-.666-.666h-8c-.367 0-.667.3-.667.666z",fill:"currentColor"})))}var j;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function _(e){return r.createElement("svg",w({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),j||(j=r.createElement("path",{d:"M9.932 4.77C9.49 3.88 8.584 3.474 7.582 3.58c-1.549.167-1.956 1.367-1.767 2.147.206.853.883 1.185 2.078 1.49h5.387c.398 0 .72.35.72.782 0 .432-.322.782-.72.782H2.72C2.322 8.782 2 8.432 2 8c0-.432.322-.783.72-.783h2.183a3.184 3.184 0 01-.48-1.091c-.42-1.738.613-3.843 3.017-4.102 1.416-.153 2.97.416 3.758 2.001.19.38.06.855-.29 1.06-.35.206-.787.065-.976-.315zM10.285 10.087h1.495c.145.784.034 1.62-.413 2.334C10.742 13.417 9.58 14 7.99 14c-2.606 0-3.804-1.61-4.048-2.676-.097-.42.138-.844.524-.949.385-.105.776.15.873.57.074.323.662 1.49 2.65 1.49 1.282 0 1.914-.459 2.187-.895.252-.402.296-.934.109-1.453z",fill:"currentColor"})))}var C;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function x(e){return r.createElement("svg",k({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),C||(C=r.createElement("path",{d:"M3.146 2.893a.787.787 0 00-.686-.885.804.804 0 00-.913.664l-.539 3.652a.787.787 0 00.686.886.804.804 0 00.913-.665l.539-3.652zM11.223 9.676a.787.787 0 00-.686-.886.804.804 0 00-.914.665l-.538 3.652a.787.787 0 00.685.885.804.804 0 00.914-.664l.539-3.652zM6.212 2.006a.788.788 0 01.705.87l-.014.117a119.94 119.94 0 01-.177 1.337c-.108.782-.246 1.72-.357 2.258a.807.807 0 01-.95.614.784.784 0 01-.634-.92c.1-.481.23-1.369.34-2.159a127.104 127.104 0 00.174-1.32l.015-.114a.803.803 0 01.898-.683zM14.992 9.676a.787.787 0 00-.686-.886.804.804 0 00-.913.665l-.539 3.652a.787.787 0 00.686.885.804.804 0 00.913-.664l.539-3.652z",fill:"currentColor"})))}var N;function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}function P(e){return r.createElement("svg",S({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),N||(N=r.createElement("path",{d:"M9.972 3.749a.667.667 0 10-1.277-.383l-2.667 8.889a.667.667 0 101.277.383l2.667-8.889zM3.982 4.823a.667.667 0 00-.939.086L.821 7.575a.667.667 0 000 .854l2.222 2.666a.667.667 0 101.025-.853L2.2 8.002l1.867-2.24a.667.667 0 00-.086-.939zM12.018 4.823a.667.667 0 01.939.086l2.222 2.666a.666.666 0 010 .854l-2.222 2.666a.667.667 0 11-1.025-.853l1.867-2.24-1.867-2.24a.667.667 0 01.086-.939z",fill:"currentColor"})))}var z,M,B=n(818);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function T(e){return r.createElement("svg",F({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),z||(z=r.createElement("g",{clipPath:"url(#bulleted_list_svg__clip0_2793_14169)"},r.createElement("path",{d:"M2.667 7c-.554 0-1 .447-1 1 0 .553.446 1 1 1 .553 0 1-.447 1-1 0-.553-.447-1-1-1zm0-4c-.554 0-1 .447-1 1 0 .553.446 1 1 1 .553 0 1-.447 1-1 0-.553-.447-1-1-1zm0 8c-.554 0-1 .453-1 1 0 .547.453 1 1 1 .546 0 1-.453 1-1 0-.547-.447-1-1-1zm2.666 1.667h8c.367 0 .667-.3.667-.667 0-.367-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667 0 .367.3.667.666.667zm0-4h8c.367 0 .667-.3.667-.667 0-.367-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667 0 .367.3.667.666.667zM4.667 4c0 .367.3.667.666.667h8c.367 0 .667-.3.667-.667 0-.367-.3-.667-.667-.667h-8c-.366 0-.666.3-.666.667z",fill:"currentColor"}))),M||(M=r.createElement("defs",null,r.createElement("clipPath",{id:"bulleted_list_svg__clip0_2793_14169"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))}var H,R;function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function I(e){return r.createElement("svg",L({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),H||(H=r.createElement("g",{clipPath:"url(#numbered_list_svg__clip0_2793_4634)"},r.createElement("path",{d:"M5.333 4.664h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666h-8c-.366 0-.666.3-.666.666 0 .367.3.667.666.667zm8 6.667h-8c-.366 0-.666.3-.666.666 0 .367.3.667.666.667h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666zm0-4h-8c-.366 0-.666.3-.666.666 0 .367.3.667.666.667h8c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666zM3 10.664H1.667a.33.33 0 00-.334.333.33.33 0 00.334.334h1v.333h-.334a.33.33 0 00-.333.333.33.33 0 00.333.334h.334v.333h-1a.33.33 0 00-.334.333.33.33 0 00.334.334H3a.33.33 0 00.333-.334v-2A.33.33 0 003 10.664zM1.667 3.331H2v1.666a.33.33 0 00.333.334.33.33 0 00.334-.334v-2a.33.33 0 00-.334-.333h-.666a.33.33 0 00-.334.333.33.33 0 00.334.334zM3 6.664H1.667a.33.33 0 00-.334.333.33.33 0 00.334.334h.866l-1.12 1.306a.327.327 0 00-.08.214v.146a.33.33 0 00.334.334H3a.33.33 0 00.333-.334A.33.33 0 003 8.664h-.867l1.12-1.307c.054-.06.08-.14.08-.213v-.147A.33.33 0 003 6.664z",fill:"currentColor"}))),R||(R=r.createElement("defs",null,r.createElement("clipPath",{id:"numbered_list_svg__clip0_2793_4634"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))}var A;function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function K(e){return r.createElement("svg",D({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),A||(A=r.createElement("path",{d:"M5.143 7.998l1.333-1.334a.57.57 0 00.172-.419.57.57 0 00-.172-.419.57.57 0 00-.419-.171.57.57 0 00-.419.171L3.867 7.598a.58.58 0 00-.134.19.56.56 0 00-.038.21.56.56 0 00.038.21.58.58 0 00.134.19l1.79 1.79a.57.57 0 00.42.172.57.57 0 00.418-.172.57.57 0 00.172-.419.57.57 0 00-.172-.419L5.143 7.998zm5.714 0L9.505 9.35a.57.57 0 00-.172.42.57.57 0 00.172.418.57.57 0 00.419.172.57.57 0 00.419-.172l1.79-1.79a.58.58 0 00.134-.19.56.56 0 00.038-.21.56.56 0 00-.038-.21.58.58 0 00-.134-.19l-1.79-1.79a.402.402 0 00-.19-.134.72.72 0 00-.23-.038.552.552 0 00-.42.171.57.57 0 00-.17.42.57.57 0 00.172.418l1.352 1.353zm-8.571 6.857c-.305 0-.572-.114-.8-.343a1.097 1.097 0 01-.343-.8V2.283c0-.304.114-.57.343-.8.228-.228.495-.342.8-.342h11.428c.305 0 .572.114.8.342.229.229.343.496.343.8v11.43c0 .304-.114.57-.343.8a1.097 1.097 0 01-.8.342H2.286zm0-1.143h11.428V2.283H2.286v11.43z",fill:"currentColor"})))}var W,q;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}function U(e){return r.createElement("svg",V({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),W||(W=r.createElement("g",{clipPath:"url(#indent_increase_svg__clip0_2793_4893)"},r.createElement("path",{d:"M2.667 14h10.666c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666H2.667c-.367 0-.667.3-.667.666 0 .367.3.667.667.667zM2 6.14v3.727c0 .3.36.446.567.233l1.86-1.86a.33.33 0 000-.473L2.567 5.9A.333.333 0 002 6.14zm6 5.193h5.333c.367 0 .667-.3.667-.666 0-.367-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667 0 .366.3.666.667.666zM2 2.667c0 .366.3.666.667.666h10.666c.367 0 .667-.3.667-.666C14 2.3 13.7 2 13.333 2H2.667C2.3 2 2 2.3 2 2.667zM8 6h5.333C13.7 6 14 5.7 14 5.333c0-.366-.3-.666-.667-.666H8c-.367 0-.667.3-.667.666 0 .367.3.667.667.667zm0 2.667h5.333c.367 0 .667-.3.667-.667 0-.367-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667 0 .367.3.667.667.667z",fill:"currentColor"}))),q||(q=r.createElement("defs",null,r.createElement("clipPath",{id:"indent_increase_svg__clip0_2793_4893"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))}var $,J;function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function G(e){return r.createElement("svg",Q({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),$||($=r.createElement("g",{clipPath:"url(#indent_decrease_svg__clip0_2793_14104)"},r.createElement("path",{d:"M8 11.333h5.333c.367 0 .667-.3.667-.666 0-.367-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667 0 .366.3.666.667.666zm-5.767-3.1l1.86 1.86a.334.334 0 00.574-.233V6.14a.33.33 0 00-.567-.233l-1.86 1.86a.328.328 0 00-.007.466zM2.667 14h10.666c.367 0 .667-.3.667-.667 0-.366-.3-.666-.667-.666H2.667c-.367 0-.667.3-.667.666 0 .367.3.667.667.667zM2 2.667c0 .366.3.666.667.666h10.666c.367 0 .667-.3.667-.666C14 2.3 13.7 2 13.333 2H2.667C2.3 2 2 2.3 2 2.667zM8 6h5.333C13.7 6 14 5.7 14 5.333c0-.366-.3-.666-.667-.666H8c-.367 0-.667.3-.667.666 0 .367.3.667.667.667zm0 2.667h5.333c.367 0 .667-.3.667-.667 0-.367-.3-.667-.667-.667H8c-.367 0-.667.3-.667.667 0 .367.3.667.667.667z",fill:"currentColor"}))),J||(J=r.createElement("defs",null,r.createElement("clipPath",{id:"indent_decrease_svg__clip0_2793_14104"},r.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"})))))}var X=n(148),Y=n(161),Z=n(636),ee=n(121),te=n(13),ne=n.n(te),re=n(127),oe=n(139),ae=n(402),ce=n(135),ie=n(146);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e){return e.length<1}const de=e=>{let{composer:t,isTextEnabled:n,onFinished:a,composerContext:c,isEditing:i}=e;const[l,s]=Object(r.useState)(!1),[u,d]=Object(r.useState)({text:"",link:i?t.getLink():""}),m=!i&&n,f=!l||m&&ue(u.text)||ue(u.link);return o.a.createElement(ce.a,{className:"mx_LinkModal",title:i?Object(ee.b)("Edit link"):Object(ee.b)("Create a link"),hasCancel:!0,onFinished:a},o.a.createElement("form",{className:"mx_LinkModal_content",onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),a(),await new Promise((e=>setTimeout(e,0))),await Object(ae.d)(c.selection),t.link(u.link,n?u.text:void 0)}},m&&o.a.createElement(oe.a,{required:!0,autoFocus:!0,label:Object(ee.b)("Text"),value:u.text,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>d((t=>se(se({},t),{},{text:e.target.value})))}),o.a.createElement(oe.a,{required:!0,autoFocus:!m,label:Object(ee.b)("Link"),value:u.link,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>{d((t=>se(se({},t),{},{link:e.target.value}))),s(!0)}}),o.a.createElement("div",{className:"mx_LinkModal_buttons"},i&&o.a.createElement("button",{type:"button",className:"danger",onClick:()=>{t.removeLinks(),a()}},Object(ee.b)("Remove")),o.a.createElement(ie.a,{primaryButton:Object(ee.b)("Save"),primaryDisabled:f,primaryIsSubmit:!0,onCancel:a}))))};var me=n(313);function fe(e){let{label:t,keyCombo:n}=e;return o.a.createElement("div",{className:"mx_FormattingButtons_Tooltip"},t,n&&o.a.createElement(Z.a,{value:n,className:"mx_FormattingButtons_Tooltip_KeyboardShortcut"}))}function pe(e){let{label:t,keyCombo:n,onClick:r,actionState:a,icon:c}=e;return o.a.createElement(X.a,{element:"button",onClick:r,title:t,className:i()("mx_FormattingButtons_Button",{mx_FormattingButtons_active:"reversed"===a,mx_FormattingButtons_Button_hover:"enabled"===a,mx_FormattingButtons_disabled:"disabled"===a}),tooltip:n&&o.a.createElement(fe,{label:t,keyCombo:n}),forceHide:"disabled"===a,alignment:Y.a.Top},c)}function be(e){let{composer:t,actionStates:n}=e;const r=Object(me.c)(),a="reversed"===n.unorderedList||"reversed"===n.orderedList;return o.a.createElement("div",{className:"mx_FormattingButtons"},o.a.createElement(pe,{actionState:n.bold,label:Object(ee.d)("Bold"),keyCombo:{ctrlOrCmdKey:!0,key:"b"},onClick:()=>t.bold(),icon:o.a.createElement(b,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.italic,label:Object(ee.d)("Italic"),keyCombo:{ctrlOrCmdKey:!0,key:"i"},onClick:()=>t.italic(),icon:o.a.createElement(g,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.underline,label:Object(ee.d)("Underline"),keyCombo:{ctrlOrCmdKey:!0,key:"u"},onClick:()=>t.underline(),icon:o.a.createElement(y,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.strikeThrough,label:Object(ee.d)("Strikethrough"),onClick:()=>t.strikeThrough(),icon:o.a.createElement(_,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.unorderedList,label:Object(ee.d)("Bulleted list"),onClick:()=>t.unorderedList(),icon:o.a.createElement(T,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.orderedList,label:Object(ee.d)("Numbered list"),onClick:()=>t.orderedList(),icon:o.a.createElement(I,{className:"mx_FormattingButtons_Icon"})}),a&&o.a.createElement(pe,{actionState:n.indent,label:Object(ee.d)("Indent increase"),onClick:()=>t.indent(),icon:o.a.createElement(U,{className:"mx_FormattingButtons_Icon"})}),a&&o.a.createElement(pe,{actionState:n.unindent,label:Object(ee.d)("Indent decrease"),onClick:()=>t.unindent(),icon:o.a.createElement(G,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.quote,label:Object(ee.d)("Quote"),onClick:()=>t.quote(),icon:o.a.createElement(x,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.inlineCode,label:Object(ee.d)("Code"),keyCombo:{ctrlOrCmdKey:!0,key:"e"},onClick:()=>t.inlineCode(),icon:o.a.createElement(P,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.codeBlock,label:Object(ee.d)("Code block"),onClick:()=>t.codeBlock(),icon:o.a.createElement(K,{className:"mx_FormattingButtons_Icon"})}),o.a.createElement(pe,{actionState:n.link,label:Object(ee.d)("Link"),onClick:()=>function(e,t,n){re.b.createDialog(de,{composerContext:t,composer:e,isTextEnabled:Object(ae.c)(),isEditing:n},"mx_CompoundDialog",!1,!0)}(t,r,"reversed"===n.link),icon:o.a.createElement(B.a,{className:"mx_FormattingButtons_Icon"})}))}var ve=n(929),he=n(168),ge=n(152),Oe=n(142),Ee=n(181),ye=n(124),je=n(128),we=n(170);var _e=n(403);function Ce(e,t,n){const o=Object(l.c)(),a=Object(me.c)(),c=Object(u.b)(),i=Object(he.b)("MessageComposerInput.ctrlEnterToSend");return Object(r.useCallback)(((r,l,s)=>{if(r instanceof ClipboardEvent)return r;const u=()=>{var n,o;null===(n=r.stopPropagation)||void 0===n||n.call(r),null===(o=r.preventDefault)||void 0===o||o.call(r),null!=t&&t.current&&!t.current.state.hide||e()};return r instanceof KeyboardEvent?function(e,t,n,r,o,a,c,i,l){const{editorStateTransfer:s}=c,u=Boolean(s)?n!==r.content():0!==r.content().length,d=Object(ge.a)().getMessageComposerAction(e),m=(null==l?void 0:l.current)&&!l.current.state.hide;if(m){let t=!1;const n=Object(ge.a)().getAutocompleteAction(e),r=l.current;if(r&&r.countCompletions()>0)switch(n){case Oe.h.ForceCompleteAutocomplete:case Oe.h.CompleteAutocomplete:l.current.onConfirmCompletion(),t=!0;break;case Oe.h.PrevSelectionInAutocomplete:l.current.moveSelection(-1),t=!0;break;case Oe.h.NextSelectionInAutocomplete:l.current.moveSelection(1),t=!0;break;case Oe.h.CancelAutocomplete:l.current.onEscape(e),t=!0}if(t)return e.preventDefault(),e.stopPropagation(),e}switch(d){case Oe.h.SendMessage:return t(),null;case Oe.h.EditPrevMessage:if(!Object(ae.b)(o)||u)break;if(ke(e,!1,s,c,a,i))return null;break;case Oe.h.EditNextMessage:if(!s||!Object(ae.a)(o)||u)break;return ke(e,!0,s,c,a,i)||(Object(_e.b)(a),e.preventDefault(),e.stopPropagation()),null}return e}(r,u,n,l,s,o,a,c,t):function(e,t,n){switch(e.inputType){case"insertParagraph":if(!n)return t(),null;break;case"sendMessage":if(n)return t(),null}return e}(r,u,i)}),[i,e,n,o,a,c,t])}function ke(e,t,n,r,o,a){const c=n?function(e,t,n){var r;const o=null===(r=t.liveTimeline)||void 0===r?void 0:r.getEvents();if(!o)return;const a=e.getEvent().getRoomId();if(!a)return;const c=n.getRoom(a);if(!c)return;const i=c.getPendingEvents(),l=Boolean(e.getEvent().getThread());return o.concat(l?[]:i)}(n,o,a):function(e,t){var n,r,o;const a=(null===(n=e.eventRelation)||void 0===n?void 0:n.key)===we.d.name;return null===(r=t.liveTimeline)||void 0===r?void 0:r.getEvents().concat(a?[]:(null===(o=t.room)||void 0===o?void 0:o.getPendingEvents())||[])}(r,o);if(!c)return!1;const i=Object(Ee.g)({events:c,isForward:t,fromEventId:null==n?void 0:n.getEvent().getId()});return!!i&&(ye.a.dispatch({action:je.a.EditEvent,event:i,timelineRenderingType:o.timelineRenderingType}),e.stopPropagation(),e.preventDefault(),!0)}var xe=n(909),Ne=n(910),Se=n(165);const Pe=Object(r.memo)((function(e){let{disabled:t=!1,onChange:n,onSend:c,placeholder:s,initialContent:u,className:d,leftComponent:f,rightComponent:p,children:b}=e;const{room:v}=Object(l.c)(),h=Object(r.useRef)(null),g=Ce(c,h,u),{ref:O,isWysiwygReady:E,content:y,actionStates:j,wysiwyg:w,suggestion:_}=Object(a.useWysiwyg)({initialContent:u,inputEventProcessor:g}),{isFocused:C,onFocus:k}=Object(Ne.a)(),x=E&&!t,N=!y&&s||void 0;return Object(xe.a)(!x,O),Object(r.useEffect)((()=>{t||null===y||null==n||n(y)}),[n,y,t]),Object(r.useEffect)((()=>{var e;function t(e){if(e.preventDefault(),e.target&&e.target instanceof HTMLAnchorElement&&"user"===e.target.getAttribute("data-mention-type")){const t=Object(Se.j)(e.target.href);v&&null!=t&&t.userId&&ye.a.dispatch({action:je.a.ViewUser,member:v.getMember(t.userId)})}}const n=null===(e=O.current)||void 0===e?void 0:e.querySelectorAll("a[data-mention-type]");return n&&n.forEach((e=>e.addEventListener("click",t))),()=>{n&&n.forEach((e=>e.removeEventListener("click",t)))}}),[O,v,y]),o.a.createElement("div",{"data-testid":"WysiwygComposer",className:i()(d,{[`${d}-focused`]:C}),onFocus:k,onBlur:k},o.a.createElement(m,{ref:h,suggestion:_,handleMention:w.mention}),o.a.createElement(be,{composer:w,actionStates:j}),o.a.createElement(ve.a,{ref:O,disabled:!x,leftComponent:f,rightComponent:p,placeholder:N}),null==b?void 0:b(O,w))}))},929:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(126),o=n.n(r),a=n(120),c=n.n(a);var i=n(13),l=n.n(i),s=n(569),u=n(313);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){const t=document.getSelection();if(t){const n=t.getRangeAt(0),r=n.startContainer===t.anchorNode&&n.startOffset===t.anchorOffset;e.selection={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset,isForward:r}}}const p=Object(a.memo)(Object(a.forwardRef)((function(e,t){let{disabled:n,placeholder:r,leftComponent:i,rightComponent:l}=e;const d=function(e,t){const[n,r]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{if(e.current){const n=e.current,o=new ResizeObserver((e=>{requestAnimationFrame((()=>{var n,o;const a=null===(n=e[0])||void 0===n||null===(o=n.contentBoxSize)||void 0===o?void 0:o[0].blockSize;r(a>=t)}))}));return o.observe(n),()=>o.unobserve(n)}}),[e,t]),n}(t,24),{onFocus:p,onBlur:b,onInput:v}=function(){const e=Object(u.c)(),[t,n]=Object(s.a)();Object(a.useEffect)((()=>{function n(){f(e)}return t&&document.addEventListener("selectionchange",n),()=>document.removeEventListener("selectionchange",n)}),[t,e]);const r=Object(a.useCallback)((()=>{f(e)}),[e]);return m(m({},n),{},{onInput:r})}();return c.a.createElement("div",{"data-testid":"WysiwygComposerEditor",className:"mx_WysiwygComposer_Editor","data-is-expanded":d},i,c.a.createElement("div",{className:"mx_WysiwygComposer_Editor_container"},c.a.createElement("div",{className:o()("mx_WysiwygComposer_Editor_content",{mx_WysiwygComposer_Editor_content_placeholder:Boolean(r)}),style:{"--placeholder":`"${r}"`},ref:t,contentEditable:!n,role:"textbox","aria-multiline":"true","aria-autocomplete":"list","aria-haspopup":"listbox",dir:"auto","aria-disabled":n,onFocus:p,onBlur:b,onInput:v})),l)})))}}]);
//# sourceMappingURL=9.js.map