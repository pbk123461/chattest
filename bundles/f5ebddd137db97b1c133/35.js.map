{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","_ref","onCancelClick","onSaveClick","isSaveDisabled","React","createElement","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","_editorStateTransfer$","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","_payload$context","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","_ref2","props","_objectWithoutProperties","_excluded","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","useEditing","ComposerContext","Provider","value","WysiwygComposer","_extends","classNames","onSend","ref","Fragment","async","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","lines","split","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Text","isMarkdownEnabled","formattedBody","plainToRich","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","dis","dispatch","event","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","resp","sendRoundTripMetric","getThread","editContent","newContent","cancelPreviousPendingEdit","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"kPA2BO,SAASA,EAAcC,GAIO,IAJN,cAC3BC,EAAa,YACbC,EAAW,eACXC,GAAiB,GACCH,EAClB,OACII,IAAAC,cAAA,OAAKC,UAAU,kCACXF,IAAAC,cAACE,IAAgB,CAACC,KAAK,YAAYC,QAASR,GACvCS,YAAG,WAERN,IAAAC,cAACE,IAAgB,CAACC,KAAK,UAAUC,QAASP,EAAaS,SAAUR,GAC5DO,YAAG,SAIpB,C,0ICwBO,SAASE,EAAkBC,GAC9B,MAAMC,EAAcC,cACdC,EAAWC,cAEjB,OAAOC,mBAA4B,KAC/B,GAAIL,GAAuBC,EAAYK,MAAQH,EAC3C,OArCL,SACHH,EACAM,EACAH,GAEA,MAAMI,EAAc,IAAIC,IAAmBF,EAAMH,GAEjD,IAAIM,EACJ,GAAIT,EAAoBU,iBAGpBD,EAAQT,EAAoBW,qBAAqBC,KAAKC,GAAMN,EAAYO,gBAAgBD,SACrF,CAKH,GAA2D,2BAAvDb,EAAoBe,WAAWC,aAAaC,OAC5C,OA3BZ,SAA6BjB,GAAkD,IAAAkB,EAC3E,OAIuB,QAHnBA,EAAAlB,EACKe,WACAC,aACAG,sBAAc,IAAAD,OAAA,EAHnBA,EAGqBE,QAAQ,2BAA4B,MAAO,EAExE,CAoBmBC,CAAoBrB,GAG/BS,EAAQa,YAAWtB,EAAoBe,WAAYR,EAAa,CAC5DgB,aAAcC,IAAcC,SAAS,qCAE7C,CAEA,OAAOhB,EAAMiB,QAAO,CAACC,EAASC,IAASD,EAAUC,EAAKC,MAAM,GAGhE,CAQmBC,CAAyB9B,EAAqBC,EAAYK,KAAMH,EAC3E,GACD,CAACH,EAAqBC,EAAaE,GAC1C,C,4CC1CM4B,EAAUC,sBAAsC,SAAgB7C,EAElE6C,GACF,IAFE,SAAElC,GAAW,EAAK,kBAAEmC,GAAiC9C,EAIrD,OCTG,SACHW,EACAoC,EACAD,GAEA,MAAMhC,EAAcC,cACdiC,EAAkBC,cAClBC,EAAYC,iBAAsB,MAElCC,EAAUC,uBACXC,IAA2B,IAAAC,EAGxB,GAAI5C,IAAaoC,EAAgBS,QAAS,OAE1C,MAAMC,EAAyB,QAAlBF,EAAGD,EAAQG,eAAO,IAAAF,IAAIG,IAAsBC,KAEzD,OAAQL,EAAQM,QACZ,KAAKC,IAAOC,yBACRC,YAAchB,EAAiBU,EAAS3C,EAAaoC,GACrD,MACJ,KAAKW,IAAOG,eACR,GAAIV,EAAQW,wBAA0BnD,EAAYmD,sBAAuB,MACzE,GAAIX,EAAQY,eAAiBC,IAAaC,KAAM,MAE5Cd,EAAQZ,MACR2B,YAAarB,EAAgBsB,WAAWC,MAAK,IAAMzB,EAAkB0B,WAAWlB,EAAQZ,QAEtF,GAGlB,CAAC/B,EAAUoC,EAAiBD,EAAmBI,EAAWpC,EAAakC,IAG3EyB,YAAcC,IAAmBtB,EACrC,CD3BIuB,CAA4BhE,EAAUkC,EAA6CC,GAC5E,IACX,IAUe,SAAS8B,EAAmBC,GAID,IAJE,oBACxChE,EAAmB,UACnBP,GAEuBuE,EADpBC,EAAKC,IAAAF,EAAAG,GAER,MAAMC,EAAsB9B,iBAAO+B,YAAuB,CAAErE,yBACtDsE,EAAiBvE,EAAkBC,GACnCuE,GAAWvE,QAA0CwE,IAAnBF,GAElC,YAAEG,EAAW,WAAEC,EAAU,SAAEC,EAAQ,eAAErF,GEjCxC,SACHU,EACAsE,GAOA,MAAMrE,EAAcC,cACdC,EAAWC,eAEVd,EAAgBsF,GAAqBC,oBAAS,IAC9ClD,EAASmD,GAAcD,mBAASP,GAgBvC,MAAO,CAAEK,SAfQnC,uBACZuC,IACGD,EAAWC,GACXH,GAAmBI,GAAoBA,GAAmBD,IAAaT,GAAe,GAE1F,CAACA,IAUcG,YAPSjC,uBACxB,MACMrC,QAAwBqE,IAAZ7C,GAAyB8C,sBAAY9C,EAAS,CAAE1B,cAAaE,WAAUH,yBACzF,CAAC2B,EAAS1B,EAAaE,EAAUH,IAIgB0E,WAD1BlC,uBAAY,IAAMkC,YAAWzE,IAAc,CAACA,IACcX,iBACzF,CFGkE2F,CAAWjF,EAAqBsE,GAE9F,OAAKC,EAKDhF,IAAAC,cAAC0F,IAAgBC,SAAQ,CAACC,MAAOhB,EAAoBzB,SACjDpD,IAAAC,cAAC6F,IAAeC,IAAA,CACZ7F,UAAW8F,IAAW,yBAA0B9F,GAChD6E,eAAgBA,EAChBK,SAAUA,EACVa,OAAQf,GACJR,IAEH,CAACwB,EAAKxD,IACH1C,IAAAC,cAAAD,IAAAmG,SAAA,KACInG,IAAAC,cAACuC,EAAO,CAACjC,SAAUmE,EAAMnE,SAAU2F,IAAKA,EAAKxD,kBAAmBA,IAChE1C,IAAAC,cAACN,EAAc,CACXE,cAAesF,EACfrF,YAAaoF,EACbnF,eAAgBA,QAlB7B,IAyBf,C,+1BGvBOqG,eAAeC,EAClBC,EACAC,EAAe3G,GAQE,IAPjB,SACI4G,EAAQ,aACRC,EAAY,iBACZC,EAAgB,2BAChBC,GAA6B,EAAI,YACjCC,GACyBhH,EAI7B,MAAMiH,EAAYC,QAAQF,GACpBG,EAAUF,EAAYC,QAAQF,aAAW,EAAXA,EAAaI,cAAgBF,QAAQL,GACnEQ,EAAoBJ,GAAaE,EAejCG,EAAOX,QAAeY,sBAAYb,GAAWA,EAC7Cc,EAAcH,GAnDxB,SAA8BI,GAC1B,MAAMH,EAAOG,EAAQ5F,aAAayF,KAClC,GAAoB,iBAATA,EACP,MAAO,GAEX,MAAMI,EAAQJ,EAAKK,MAAM,MAAMlG,KAAKmG,GAAMA,EAAEC,SAC5C,OAAIH,EAAMI,OAAS,GAAKJ,EAAM,GAAGK,WAAW,OAA6B,IAApBL,EAAM,GAAGI,OAClD,GAAEJ,EAAM,SAEb,EACX,CAyC6CM,CAAqBhB,IAAiB,GACzEiB,EAAuBZ,GA9DjC,SAA8BI,GAC1B,MAAMS,EAAOT,EAAQ5F,aAAaG,eAClC,IAAKkG,EACD,MAAO,GAEX,MACMC,GADW,IAAIC,WAAYC,gBAAgBH,EAAM,aAAaZ,KAC3CgB,cAAc,YACvC,OAAQH,GAAWA,EAAQI,WAAc,EAC7C,CAsDsDC,CAAqBxB,IAAiB,GAElFxE,EAAoB,CAEtBiG,QAASC,UAAQC,KACjBrB,KAAML,EAAa,GAAEO,OAAgBF,IAASA,GAK5CsB,EAAoBvG,IAAcC,SAAkB,oCACpDuG,EAAgBlC,EAASD,EAAUkC,QAA0BE,sBAAYpC,GAAW,KAEtFmC,IACArG,EAAQV,OAAS,yBACjBU,EAAQR,eAAiBiF,EAAa,GAAEgB,OAAyBY,IAAkBA,GAGnF5B,IACAzE,EAAQ,iBAAmB,CACvBiG,QAASjG,EAAQiG,QACjBnB,KAAMA,GAGNuB,IACArG,EAAQ,iBAAiBV,OAAS,yBAClCU,EAAQ,iBAAiC,eAAIqG,IAiBrD,OAlHJ,SAAwBrG,EAAmBoE,GACnCA,IACApE,EAAQ,gBAAeuG,IAAA,GACfvG,EAAQ,iBAAmB,CAAC,GAC7BoE,GAGf,CAkGIoC,CAAexG,EAJKyE,EAAS8B,IAAA,GAAQnC,GAAQ,IAAEqC,SAAU,YAAaC,SAAUlC,EAAYmC,UAAYvC,IAMnGK,GAAaJ,GAAgBC,GAC9BsC,YAAyB5G,EAASqE,EAAc,CAC5CC,mBACAuC,sBAAuBtC,IAIxBvE,CACX,C,mCC9FOgE,eAAe8C,EAClB5C,EACAC,EAAe3G,GAEY,IAD3B,YAAEc,EAAW,SAAEE,GAAwChB,EAA3BuJ,EAAMxE,IAAA/E,EAAAgF,GAElC,MAAM,SAAE4B,EAAQ,aAAEC,GAAiB0C,GAC7B,KAAEpI,GAASL,EACX0I,EAASrI,aAAI,EAAJA,EAAMqI,OAErB,IAAKA,EACD,OAGJ,MAAMC,EAA8B,CAChCC,UAAW,WACXzC,WAAW,EACXE,QAASD,QAAQL,GAEjB8C,UAAU/C,aAAQ,EAARA,EAAUqC,YAAaW,IAAqBC,MAQ1DC,IAAiBC,SAASC,WAA0BP,GAEpD,MAAMjH,QAAgBiE,EAAqBC,EAASC,EAAQ4C,GAS5D,IAAK/G,EAAQ8E,KAAKO,OACd,OAGAxF,IAAcC,SAAS,6CACvB2H,YAAyBzH,GAG7B,MAAM0H,EAAWtD,WAAUsC,WAAYtC,aAAQ,EAARA,EAAUqC,YAAaW,IAAqBC,KAAOjD,EAASsC,SAAW,KAExGiB,EAAOC,YACTZ,GACCa,GAAyBrJ,EAASsI,YAAYe,EAAcH,EAAU1H,IACvExB,GAyCJ,OAtCI6F,GAGAyD,IAAIC,SAAS,CACT3G,OAAQ,iBACR4G,MAAO,KACP/G,QAAS3C,EAAYmD,wBAI7BqG,IAAIC,SAAS,CAAE3G,OAAQ,iBACvB6G,eAAaC,SAASC,IAClB,GAAIC,wBAAcpI,EAASmI,EAAOE,QAAS,EAGnBjE,aAAQ,EAARA,EAAUqC,YAAaW,IAAqBC,MAE5DS,IAAIC,SAAS,CAAE3G,OAAS,WAAU+G,EAAOG,WAEjD,KAEAzI,IAAcC,SAAS,6CACvB6H,EAAK5F,MAAMwG,IACPC,YAAoBhK,EAAUwI,EAAQuB,EAAK7B,SAAS,IAQxD7G,IAAcC,SAAS,gCACvBgI,IAAIC,SAAS,CACT3G,OAAQ,mBACRK,sBAAuBnD,EAAYmD,wBAIpCkG,CACX,CAQO3D,eAAelB,EAClB4C,EAAYrD,GAEe,IAD3B,YAAE/D,EAAW,SAAEE,EAAQ,oBAAEH,GAAwCgE,EAEjE,MAAMmC,EAAcnG,EAAoBe,WAExCkI,IAAiBC,SAASC,WAA0B,CAChDN,UAAW,WACXzC,WAAW,EACX0C,SAAUzC,QAAQF,aAAW,EAAXA,EAAaiE,aAC/B9D,QAASD,QAAQF,EAAYI,gBAUjC,MAAM8D,QAAoBzE,EAAqByB,GAAM,EAAM,CAAElB,gBACvDmE,EAAaD,EAAY,iBAI/B,GAAyB,MAArBC,aAAU,EAAVA,EAAY7D,MAQZ,OAPA8D,YAA0BpK,EAAUH,QACpCwK,YAAwB,CACpB5D,QAAST,EACTsE,cAAeA,KACX/F,YAAWzE,EAAY,IAMnC,IAAIyK,EAEJ,MAAM/B,EAASxC,EAAYwE,YAG3B,GCtKG,SAA2BL,EAAsBtK,GAEpD,MAAM4K,EAAa5K,EAAoBe,WAAWC,aAClD,OACI4J,EAAoB,UAAMN,EAAoB,SAC9CM,EAAiB,OAAMN,EAAiB,MACxCM,EAAmB,SAAMN,EAAmB,QAC5CM,EAA2B,iBAAMN,EAA2B,cAKpE,CD0JQO,CAAkBP,EAAYtK,IAAwB2I,EAGtC,CACZ4B,YAA0BpK,EAAUH,GAEpC,MACMqJ,EADQrJ,EAAoBe,WACX+J,cAAgB,KAEvCJ,EAAWvK,EAASsI,YAAYE,EAAQU,EAAUgB,GAClDZ,IAAIC,SAAS,CAAE3G,OAAQ,gBAC3B,CAIJ,OADA2B,YAAWzE,GACJyK,CACX,C","file":"bundles/f5ebddd137db97b1c133/35.js","sourceRoot":""}