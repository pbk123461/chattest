{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["endEditing","roomContext","dis","dispatch","action","Action","EditEvent","event","timelineRenderingType","FocusSendMessageComposer","context","cancelPreviousPendingEdit","mxClient","editorStateTransfer","previousEdit","getEvent","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","async","createMessageContent","message","isHTML","_ref","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","getContent","lines","split","map","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","formatted_body","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","content","msgtype","MsgType","Text","isMarkdownEnabled","SettingsStore","getValue","formattedBody","plainToRich","format","_objectSpread","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","_objectWithoutProperties","_excluded","room","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","name","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","command","then","resp","sendRoundTripMetric","editMessage","_ref2","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/f5ebddd137db97b1c133/36.js","sourceRoot":""}